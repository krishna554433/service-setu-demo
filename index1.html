<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Service Setu - Demo</title>
<style>
  :root{
    --bg:#f5f7fb;
    --card:#ffffff;
    --primary:#0077ee;
    --accent:#ff7a2d;
    --muted:#6b7280;
    --success:#16a34a;
    --danger:#ef4444;
    font-family: "Segoe UI", Roboto, "Helvetica Neue", Arial;
  }
  *{box-sizing:border-box}
  body{margin:0;background:linear-gradient(180deg,#eef6ff 0%, #fbfbff 100%);color:#0f172a;min-height:100vh}
  .app{max-width:420px;margin:18px auto;padding:14px}
  .card{background:var(--card);border-radius:14px;box-shadow:0 6px 20px rgba(12, 24, 60, .08);padding:18px;margin-bottom:14px}
  .center{text-align:center}
  h1,h2,h3{margin:6px 0}
  p{margin:8px 0;color:var(--muted)}
  .btn{display:inline-block;padding:10px 14px;border-radius:10px;border:0;background:var(--primary);color:#fff;cursor:pointer;margin:6px}
  .btn.secondary{background:transparent;color:var(--primary);border:1px solid rgba(0,119,238,.12)}
  .btn.accent{background:var(--accent)}
  .row{display:flex;gap:8px;flex-wrap:wrap}
  .input, textarea{width:100%;padding:10px;border-radius:8px;border:1px solid #e6e9ef;font-size:15px}
  textarea{min-height:90px;resize:vertical}
  .small{font-size:13px;color:var(--muted)}
  .nav{position:fixed;left:50%;transform:translateX(-50%);bottom:18px;background:rgba(255,255,255,.95);padding:8px 12px;border-radius:999px;box-shadow:0 6px 18px rgba(12,24,60,.06);display:flex;gap:10px}
  .icon-grid{display:flex;gap:12px;flex-wrap:wrap;justify-content:center;margin-top:8px}
  .icon{width:76px;height:76px;border-radius:12px;background:linear-gradient(180deg, #ffffff, #f6f9ff);display:flex;align-items:center;justify-content:center;flex-direction:column;box-shadow:0 6px 16px rgba(12,24,60,.04);cursor:pointer}
  .badge{background:var(--accent);color:#fff;padding:6px 10px;border-radius:999px;font-weight:600}
  .muted{color:var(--muted)}
  .otp-box{width:52px;height:52px;border-radius:10px;border:1px solid #e6e9ef;font-size:22px;text-align:center}
  .small-note{font-size:13px;color:var(--muted);margin-top:6px}
  .hidden{display:none}
  .row-between{display:flex;justify-content:space-between;align-items:center}
  .status-dot{width:12px;height:12px;border-radius:50%}
  .map-sim{width:100%;height:220px;background:linear-gradient(180deg,#e6f0ff,#fff);border-radius:12px;position:relative;overflow:hidden;display:flex;align-items:center;justify-content:center}
  .provider-pin{width:44px;height:44px;border-radius:10px;background:var(--primary);color:#fff;display:flex;align-items:center;justify-content:center;font-weight:700;position:absolute;left:6%;top:60%;}
  .customer-pin{width:44px;height:44px;border-radius:10px;background:var(--accent);color:#fff;display:flex;align-items:center;justify-content:center;font-weight:700;position:absolute;left:82%;top:18%;}
  .progress{height:6px;background:#e6eefb;border-radius:999px;overflow:hidden}
  .progress > i{display:block;height:100%;width:0%;background:linear-gradient(90deg,var(--primary),var(--accent))}
  /* responsive */
  @media (max-width:480px){
    .app{margin:8px}
    .icon{width:66px;height:66px}
    .nav{bottom:12px}
    .otp-box{width:44px;height:44px;font-size:18px}
  }
</style>
</head>
<body>

<div class="app">

  <!-- PAGE CONTAINER: all screens as divs -->
  <!-- page attribute data-page="1" ... "16" -->
  <!-- Only one .screen.active is visible at a time -->

  <div id="pages">

    <!-- Page 1: Welcome -->
    <div class="card screen active" data-page="1" id="p1">
      <div class="center">
        <img src="" alt="logo" style="width:84px;height:84px;border-radius:18px;background:linear-gradient(90deg,var(--primary),var(--accent));display:inline-block;margin-bottom:12px">
        <h1>Service Setu</h1>
        <p class="small-note">Apni service, apni city, apne log ke saath</p>
        <div style="margin-top:12px">
          <button class="btn" onclick="goTo(2)">Get Started</button>
        </div>
      </div>
    </div>

    <!-- Page 2: Login Choice -->
    <div class="card screen hidden" data-page="2" id="p2">
      <h2 class="center">Login As</h2>
      <p class="small center muted">Choose role to continue</p>
      <div class="row" style="justify-content:center;margin-top:12px">
        <button class="btn" onclick="setRole('customer')">Customer</button>
        <button class="btn secondary" onclick="setRole('provider')">Service Provider</button>
      </div>
      <p class="small-note center">You can switch later from profile</p>
    </div>

    <!-- Page 3: Enter Mobile -->
    <div class="card screen hidden" data-page="3" id="p3">
      <h2>Enter Mobile Number</h2>
      <p class="small muted">We will send a 4-digit OTP (valid 5 minutes)</p>
      <input id="mobileInput" class="input" type="tel" placeholder="Ex: 9876543210" maxlength="10">
      <div style="margin-top:10px" class="row">
        <button class="btn" onclick="sendOtpMock()">Send OTP</button>
        <button class="btn secondary" onclick="goTo(2)">Back</button>
      </div>
    </div>

    <!-- Page 4: OTP Sent (info) -->
    <div class="card screen hidden" data-page="4" id="p4">
      <h2>OTP Sent</h2>
      <p class="small muted">A 4-digit OTP has been sent to <b id="showMobile"></b></p>
      <p class="small-note">OTP is mock â€” for demo use code <span class="badge">1234</span></p>
      <div class="row" style="justify-content:center;margin-top:8px">
        <button class="btn" onclick="goTo(5)">Enter OTP</button>
      </div>
    </div>

    <!-- Page 5: OTP Entry -->
    <div class="card screen hidden" data-page="5" id="p5">
      <h2 class="center">Enter OTP</h2>
      <div style="display:flex;gap:8px;justify-content:center;margin-top:12px">
        <input maxlength="1" class="otp-box" id="o1" oninput="autoFocusOTP(1)">
        <input maxlength="1" class="otp-box" id="o2" oninput="autoFocusOTP(2)">
        <input maxlength="1" class="otp-box" id="o3" oninput="autoFocusOTP(3)">
        <input maxlength="1" class="otp-box" id="o4" oninput="autoFocusOTP(4)">
      </div>
      <p class="small-note center" style="margin-top:10px">OTP valid for <span id="otpTimer">05:00</span></p>
      <div class="row" style="justify-content:center;margin-top:12px">
        <button class="btn" onclick="verifyOtp()">Verify</button>
        <button class="btn secondary" onclick="resendOtp()">Resend</button>
      </div>
    </div>

    <!-- Page 6: OTP Verified -->
    <div class="card screen hidden" data-page="6" id="p6">
      <div class="center">
        <h2>OTP Verified</h2>
        <p class="small muted">Login successful as <span id="roleLabel">Customer</span></p>
        <div style="margin-top:12px">
          <button class="btn" onclick="goTo(7)">Continue to Home</button>
        </div>
      </div>
    </div>

    <!-- Page 7: Home (Search + Icons + Nav) -->
    <div class="card screen hidden" data-page="7" id="p7">
      <div class="row-between">
        <div>
          <h3>Service Setu</h3>
          <p class="small muted" id="homeSub">Search services in your area</p>
        </div>
        <div style="text-align:right">
          <div class="small muted">Balance</div>
          <div><span class="badge">â‚¹0</span></div>
        </div>
      </div>

      <input class="input" id="searchInput" placeholder="Search: plumber, electrician..." style="margin-top:12px">

      <div class="icon-grid" id="categoryGrid" style="margin-top:12px">
        <div class="icon" onclick="selectCategory('Plumber')"><div>ðŸ”§</div><div class="small muted">Plumber</div></div>
        <div class="icon" onclick="selectCategory('Electrician')"><div>ðŸ’¡</div><div class="small muted">Electrician</div></div>
        <div class="icon" onclick="selectCategory('Carpenter')"><div>ðŸªš</div><div class="small muted">Carpenter</div></div>
        <div class="icon" onclick="selectCategory('Cleaner')"><div>ðŸ§¹</div><div class="small muted">Cleaner</div></div>
      </div>

      <div style="margin-top:12px" id="quickServices"></div>

      <div style="margin-top:14px" class="row" id="homeButtons">
        <button class="btn" onclick="goTo(8)">Post a Request</button>
        <button class="btn secondary" onclick="goTo(11)">My Bookings</button>
      </div>
    </div>

    <!-- Page 8: Post Problem -->
    <div class="card screen hidden" data-page="8" id="p8">
      <h2>Describe your problem</h2>
      <textarea id="problemTxt" placeholder="Type your problem here..."></textarea>
      <input class="input" id="addressInput" placeholder="Service address (eg. Jaipur, ...)" style="margin-top:10px">
      <div class="small-note">Contact will be shared only with the provider who accepts the job.</div>
      <div style="margin-top:12px" class="row">
        <button class="btn" onclick="postRequest()">Post Request</button>
        <button class="btn secondary" onclick="goTo(7)">Cancel</button>
      </div>
    </div>

    <!-- Page 9: Request Sent / Waiting -->
    <div class="card screen hidden" data-page="9" id="p9">
      <h2>Request Posted</h2>
      <p class="small muted">Waiting for nearby providers to accept...</p>
      <div style="margin-top:12px" class="progress"><i id="waitingProg" style="width:0%"></i></div>
      <div style="margin-top:12px" class="row">
        <button class="btn" onclick="simulateProviderAccept()">Simulate Accept (for demo)</button>
        <button class="btn secondary" onclick="goTo(7)">Cancel Request</button>
      </div>
    </div>

    <!-- Page 10: Request Accepted -->
    <div class="card screen hidden" data-page="10" id="p10">
      <h2>Request Accepted</h2>
      <p class="small muted">Provider <b id="providerName">Ramesh</b> accepted your request.</p>
      <div class="row" style="margin-top:12px">
        <div class="map-sim" id="miniMap">
          <div class="provider-pin" id="provPin">R</div>
          <div class="customer-pin">U</div>
        </div>
      </div>
      <div style="margin-top:12px" class="row">
        <button class="btn" onclick="goTo(11)">Track Provider</button>
        <button class="btn secondary" onclick="contactProvider()">Contact</button>
      </div>
    </div>

    <!-- Page 11: Live Location Tracking -->
    <div class="card screen hidden" data-page="11" id="p11">
      <h2>Live Tracking</h2>
      <p class="small muted">Provider is on the way â€” watch the progress</p>
      <div class="map-sim" id="map1" style="margin-top:10px">
        <div class="provider-pin" id="movingPin">R</div>
        <div class="customer-pin">U</div>
      </div>
      <div style="margin-top:10px" class="row-between">
        <div class="small muted">ETA: <span id="eta">12 min</span></div>
        <div class="small muted">Distance: <span id="distance">3.5 km</span></div>
      </div>
      <div style="margin-top:12px" class="row">
        <button class="btn" onclick="arrived()">I Reached (Provider)</button>
        <button class="btn secondary" onclick="goTo(10)">Back</button>
      </div>
    </div>

    <!-- Page 12: Provider Arrived -->
    <div class="card screen hidden" data-page="12" id="p12">
      <h2>Provider Reached</h2>
      <p class="small muted">Provider has marked: <b>I reached location</b></p>
      <div class="row" style="margin-top:12px">
        <button class="btn" onclick="goTo(13)">Start Work (requires OTP)</button>
        <button class="btn secondary" onclick="goTo(11)">Track</button>
      </div>
    </div>

    <!-- Page 13: Start Work (OTP entry by provider) -->
    <div class="card screen hidden" data-page="13" id="p13">
      <h2>Start Work</h2>
      <p class="small muted">Customer will give you a 4-digit OTP to start.</p>
      <div style="display:flex;gap:8px;justify-content:center;margin-top:12px">
        <input maxlength="1" class="otp-box" id="s1">
        <input maxlength="1" class="otp-box" id="s2">
        <input maxlength="1" class="otp-box" id="s3">
        <input maxlength="1" class="otp-box" id="s4">
      </div>
      <div class="row" style="margin-top:12px;justify-content:center">
        <button class="btn" onclick="verifyStartOtp()">Verify & Start</button>
      </div>
    </div>

    <!-- Page 14: Work In Progress & Done -->
    <div class="card screen hidden" data-page="14" id="p14">
      <h2>Work In Progress</h2>
      <p class="small muted">Provider working... you will get notified when done.</p>
      <div style="margin-top:12px" class="row">
        <button class="btn" onclick="finishWork()">Done My Work</button>
      </div>
    </div>

    <!-- Page 15: Confirm Work Done (OTP confirm by customer) -->
    <div class="card screen hidden" data-page="15" id="p15">
      <h2>Confirm Work Done</h2>
      <p class="small muted">Enter the 4-digit OTP given by provider to confirm.</p>
      <div style="display:flex;gap:8px;justify-content:center;margin-top:12px">
        <input maxlength="1" class="otp-box" id="c1">
        <input maxlength="1" class="otp-box" id="c2">
        <input maxlength="1" class="otp-box" id="c3">
        <input maxlength="1" class="otp-box" id="c4">
      </div>
      <div style="margin-top:12px" class="row">
        <button class="btn" onclick="verifyFinishOtp()">Confirm</button>
      </div>
    </div>

    <!-- Page 16: Payment & Support -->
    <div class="card screen hidden" data-page="16" id="p16">
      <h2>Payment</h2>
      <p class="small muted">Select payment mode</p>
      <div style="margin-top:10px" class="row">
        <button class="btn" onclick="pay('cash')">Cash</button>
        <button class="btn accent" onclick="pay('upi')">Pay via UPI</button>
      </div>

      <div style="margin-top:14px">
        <h3>Help & Support</h3>
        <p class="small muted">If anything goes wrong, contact us: <br> <b>support@servicesetu.example</b></p>
      </div>
    </div>

  </div>

  <!-- Bottom nav (visible on some pages) -->
  <div class="nav" id="bottomNav" style="display:none">
    <button class="btn secondary" onclick="goTo(7)">Home</button>
    <button class="btn" onclick="goTo(11)">Track</button>
    <button class="btn secondary" onclick="goTo(16)">Help</button>
  </div>

</div>

<script>
  /* App state */
  let role = 'customer';
  let otpTimer;
  let otpSeconds = 300; // 5 min
  let mockOtp = '1234';

  /* utility */
  function el(id){return document.getElementById(id)}
  function showNav(show){el('bottomNav').style.display = show ? 'flex' : 'none'}

  /* page navigation */
  function goTo(n){
    document.querySelectorAll('.screen').forEach(s=>s.classList.add('hidden'));
    const page = document.querySelector('.screen[data-page="'+n+'"]');
    if(page) page.classList.remove('hidden');
    // show bottom nav on some pages
    showNav([7,9,10,11,14,16].includes(n));
  }

  function setRole(r){
    role = r;
    el('roleLabel').innerText = (role === 'customer') ? 'Customer' : 'Service Provider';
    goTo(3);
  }

  /* send OTP mock */
  function sendOtpMock(){
    const m = el('mobileInput').value.trim();
    if(!/^[6-9]\d{9}$/.test(m)){ alert('Enter valid 10-digit mobile number'); return; }
    el('showMobile').innerText = m;
    otpSeconds = 300;
    startOtpTimer();
    goTo(4);
  }

  function startOtpTimer(){
    clearInterval(otpTimer);
    el('otpTimer').innerText = formatTime(otpSeconds);
    otpTimer = setInterval(()=>{
      otpSeconds--;
      if(otpSeconds<=0){ clearInterval(otpTimer); el('otpTimer').innerText='00:00'; }
      else el('otpTimer').innerText = formatTime(otpSeconds);
    },1000);
  }

  function formatTime(s){
    const mm = String(Math.floor(s/60)).padStart(2,'0');
    const ss = String(s%60).padStart(2,'0');
    return mm+':'+ss;
  }

  function autoFocusOTP(pos){
    const ids = ['o1','o2','o3','o4'];
    const cur = el(ids[pos-1]).value;
    if(cur && pos < 4) el(ids[pos]).focus();
  }

  function verifyOtp(){
    const code = (el('o1').value||'')+(el('o2').value||'')+(el('o3').value||'')+(el('o4').value||'');
    if(code === mockOtp){
      clearInterval(otpTimer);
      goTo(6);
    } else {
      alert('Invalid OTP for demo. Use 1234');
    }
  }
  function resendOtp(){ otpSeconds = 300; startOtpTimer(); alert('Mock OTP resent: 1234'); }

  /* Home interactions */
  function selectCategory(cat){
    el('quickServices').innerHTML = `<div class="card"><h3>${cat} nearby</h3><p class="small muted">Tap a provider to see details</p>
      <div style="margin-top:8px">
        <div class="card" style="padding:8px">
          <div class="row-between">
            <div><b>Ramesh</b><div class="small muted">4.5 â˜… â€¢ 2 km away</div></div>
            <div><button class="btn" onclick="chooseProvider('Ramesh')">Select</button></div>
          </div>
        </div>
      </div>
    </div>`;
  }

  function chooseProvider(name){
    el('providerName').innerText = name;
    goTo(10);
  }

  /* Post request */
  function postRequest(){
    const problem = el('problemTxt').value.trim();
    const addr = el('addressInput').value.trim();
    if(!problem || !addr){ alert('Fill problem and address'); return; }
    // simulate posting
    goTo(9);
    // simulate progress bar
    let w=0; const prog = el('waitingProg');
    const t=setInterval(()=>{ w+=6; prog.style.width = w+'%'; if(w>=100){ clearInterval(t); } }, 300);
  }

  /* Simulate provider accept (demo) */
  function simulateProviderAccept(){
    // provider accepts, show accepted screen
    goTo(10);
  }

  function contactProvider(){
    alert('Contact (masked): +91-XXXX-XXX'+Math.floor(100+Math.random()*900));
  }

  /* Tracking animation */
  function arrived(){
    // simulate provider reached
    goTo(12);
  }

  // move provider pin periodically on tracking screen
  let moveInterval;
  function startMovingPin(){
    const mp = el('movingPin');
    if(!mp) return;
    let left = 6;
    clearInterval(moveInterval);
    moveInterval = setInterval(()=>{
      left += 2.5;
      mp.style.left = left + '%';
      if(left>80){ clearInterval(moveInterval); el('eta').innerText = 'Arrived'; el('distance').innerText='0.1 km'; }
    },800);
  }

  /* Start work - provider enters OTP (demo) */
  function verifyStartOtp(){
    // For demo accept any non-empty OTP
    const code = (el('s1').value||'')+(el('s2').value||'')+(el('s3').value||'')+(el('s4').value||'');
    if(code.length<4){ alert('Enter 4 digits'); return; }
    goTo(14);
  }

  /* Finish work -> customer confirmation */
  function finishWork(){
    // provider clicked done -> customer gets otp from provider (demo)
    // show dialog with OTP for demo
    alert('Provider gave OTP: 5678 (demo)');
    goTo(15);
  }

  function verifyFinishOtp(){
    const code = (el('c1').value||'')+(el('c2').value||'')+(el('c3').value||'')+(el('c4').value||'');
    if(code === '5678'){
      alert('Work confirmed. Proceed to payment.');
      goTo(16);
    } else {
      alert('Invalid OTP. For demo use 5678');
    }
  }

  /* Payment */
  function pay(mode){
    if(mode==='cash'){
      alert('Cash selected: Please pay provider in person. Thank you!');
      completeBooking();
    } else {
      // UPI flow (mock)
      const upi = prompt('Enter UPI ID (demo):','yourupi@bank');
      if(upi){
        alert('UPI payment success (mock).');
        completeBooking();
      } else {
        alert('Payment cancelled');
      }
    }
  }

  function completeBooking(){
    // reset or go to home
    alert('Booking complete. Thank you for using ServiceSetu!');
    // reset fields
    el('problemTxt').value = '';
    el('addressInput').value = '';
    goTo(7);
  }

  /* small helpers on load */
  window.onload = function(){
    // initial animations & auto redirect from welcome -> login
    setTimeout(()=>{ goTo(2); },1200);
    // start provider pin moving if tracking opened
    // observe page changes to start the pin movement when tracking page is shown
    const observer = new MutationObserver(()=> {
      const p11 = !document.querySelector('.screen[data-page="11"]').classList.contains('hidden');
      if(p11) startMovingPin();
    });
    observer.observe(document.getElementById('pages'), { attributes:true, childList:true, subtree:true });
  };

  // small focus helpers for OTP inputs (enter to next)
  ['s1','s2','s3','s4','c1','c2','c3','c4'].forEach((id,i,arr)=>{
    const elInput = document.getElementById(id);
    if(elInput){
      elInput.addEventListener('input', function(){ if(this.value && arr[i+1]) document.getElementById(arr[i+1]).focus(); });
    }
  });

</script>
</body>
</html>
